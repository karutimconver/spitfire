local love = require "love"

_G.font = {
A = {1, 1, 1, "N",
     1, 0, 1, "N",
     1, 1, 1, "N",
     1, 0, 1, "N",
     1, 0, 1, "E"},

B = {1, 1, 0, "N",
     1, 0, 1, "N",
     1, 1, 0, "N",
     1, 0, 1, "N",
     1, 1, 0, "E"},

C = {1, 1, 1, "N",
     1, 0, 0, "N",
     1, 0, 0, "N",
     1, 0, 0, "N",
     1, 1, 1, "E"},

D = {1, 1, 0, "N",
     1, 0, 1, "N",
     1, 0, 1, "N",
     1, 0, 1, "N",
     1, 1, 0, "E"},

E = {1, 1, 1, "N",
     1, 0, 0, "N",
     1, 1, 0, "N",
     1, 0, 0, "N",
     1, 1, 1, "E"},

F = {1, 1, 1, "N",
     1, 0, 0, "N",
     1, 1, 0, "N",
     1, 0, 0, "N",
     1, 0, 0, "E"},

G = {0, 1, 1, "N",
     1, 0, 0, "N",
     1, 0, 0, "N",
     1, 0, 1, "N",
     0, 1, 1, "E"},
  
H = {1, 0, 1, "N",
     1, 0, 1, "N",
     1, 1, 1, "N",
     1, 0, 1, "N",
     1, 0, 1, "E"},

I = {1, 1, 1, "N",
     0, 1, 0, "N",
     0, 1, 0, "N",
     0, 1, 0, "N",
     1, 1, 1, "E"},

J = {1, 1, 1, "N",
     0, 0, 1, "N",
     0, 0, 1, "N",
     1, 0, 1, "N",
     0, 1, 0, "E"},

K = {1, 0, 1, "N",
     1, 1, 0, "N",
     1, 0, 0, "N",
     1, 1, 0, "N",
     1, 0, 1, "E"},

L = {1, 0, 0, "N",
     1, 0, 0, "N",
     1, 0, 0, "N",
     1, 0, 0, "N",
     1, 1, 1, "E"},

M = {1, 0, 1, "N",
     1, 1, 1, "N",
     1, 0, 1, "N",
     1, 0, 1, "N",
     1, 0, 1, "E"},

N = {1, 1, 0, "N",
     1, 0, 1, "N",
     1, 0, 1, "N",
     1, 0, 1, "N",
     1, 0, 1, "E"},

O = {0, 1, 0, "N",
     1, 0, 1, "N",
     1, 0, 1, "N",
     1, 0, 1, "N",
     0, 1, 0, "E"},

P = {1, 1, 1, "N",
     1, 0, 1, "N",
     1, 1, 1, "N",
     1, 0, 0, "N",
     1, 0, 0, "E"},

Q = {0, 1, 0, "N",
     1, 0, 1, "N",
     1, 0, 1, "N",
     1, 1, 0, "N",
     0, 1, 1, "E"},

R = {1, 1, 0, "N",
     1, 0, 1, "N",
     1, 1, 0, "N",
     1, 0, 1, "N",
     1, 0, 1, "E"},

S = {0, 1, 1, "N",
     1, 0, 0, "N",
     1, 1, 1, "N",
     0, 0, 1, "N",
     1, 1, 0, "E"},

T = {1, 1, 1, "N",
     0, 1, 0, "N",
     0, 1, 0, "N",
     0, 1, 0, "N",
     0, 1, 0, "E"},

U = {1, 0, 1, "N",
     1, 0, 1, "N",
     1, 0, 1, "N",
     1, 0, 1, "N",
     0, 1, 1, "E"},

V = {1, 0, 1, "N",
     1, 0, 1, "N",
     1, 0, 1, "N",
     1, 1, 1, "N",
     0, 1, 0, "E"},

W = {1, 0, 1, "N",
     1, 0, 1, "N",
     1, 0, 1, "N",
     1, 1, 1, "N",
     1, 0, 1, "E"},

X = {1, 0, 1, "N",
     1, 0, 1, "N",
     0, 1, 0, "N",
     1, 0, 1, "N",
     1, 0, 1, "E"},

Y = {1, 0, 1, "N",
     1, 0, 1, "N",
     1, 0, 1, "N",
     0, 1, 0, "N",
     0, 1, 0, "E"},

Z = {1, 1, 1, "N",
     0, 0, 1, "N",
     0, 1, 0, "N",
     1, 0, 0, "N",
     1, 1, 1, "E"},

["0"] = {1, 1, 1, "N",
       1, 0, 1, "N",
       1, 0, 1, "N",
       1, 0, 1, "N",
       1, 1, 1, "E"},

["1"] = {0, 0, 1, "N",
       0, 0, 1, "N",
       0, 0, 1, "N",
       0, 0, 1, "N",
       0, 0, 1, "E"},

["2"] = {1, 1, 1, "N",
       0, 0, 1, "N",
       1, 1, 1, "N",
       1, 0, 0, "N",
       1, 1, 1, "E"},

["3"] = {1, 1, 1, "N",
       0, 0, 1, "N",
       0, 1, 1, "N",
       0, 0, 1, "N",
       1, 1, 1, "E"},

["4"] = {1, 0, 1, "N",
       1, 0, 1, "N",
       1, 1, 1, "N",
       0, 0, 1, "N",
       0, 0, 1, "E"},

["5"] = {1, 1, 1, "N",
       1, 0, 0, "N",
       1, 1, 1, "N",
       0, 0, 1, "N",
       1, 1, 1, "E"},

["6"] = {1, 1, 1, "N",
       1, 0, 0, "N",
       1, 1, 1, "N",
       1, 0, 1, "N",
       1, 1, 1, "E"},

["7"] = {1, 1, 1, "N",
       0, 0, 1, "N",
       0, 0, 1, "N",
       0, 0, 1, "N",
       0, 0, 1, "E"},

["8"] = {1, 1, 1, "N",
       1, 0, 1, "N",
       1, 1, 1, "N",
       1, 0, 1, "N",
       1, 1, 1, "E"},

["9"] = {1, 1, 1, "N",
       1, 0, 1, "N",
       1, 1, 1, "N",
       0, 0, 1, "N",
       1, 1, 1, "E"},


["="] = {0, 0, 0, "N",
         1, 1, 1, "N",
         0, 0, 0, "N",
         1, 1, 1, "N",
         0, 0, 0, "E"},

["."] = {0, 0, 0, "N",
         0, 0, 0, "N",
         0, 0, 0, "N",
         0, 0, 0, "N",
         1, 0, 0, "E"},

["!"] = {1, 0, 0, "N",
         1, 0, 0, "N",
         1, 0, 0, "N",
         0, 0, 0, "N",
         1, 0, 0, "E"},

["?"] = {1, 1, 1, "N",
         0, 0, 1, "N",
         0, 1, 1, "N",
         0, 0, 0, "N",
         0, 1, 0, "E"},

["-"] = {0, 0, 0, "N",
         0, 0, 0, "N",
         1, 1, 1, "N",
         0, 0, 0, "N",
         0, 0, 0, "E"},

["_"] = {0, 0, 0, "N",
         0, 0, 0, "N",
         0, 0, 0, "N",
         0, 0, 0, "N",
         1, 1, 1, "E"},

["$"] = {1, 1, 1, "N",
         1, 0, 0, "N",
         0, 1, 1, "N",
         1, 1, 1, "N",
         0, 1, 0, "E"},
}

function _G.drawGlyph(glyph, x, y, color)
    if glyph == " " then
        return
    end

    if string.len(glyph) ~= 1 then
        print("Error! drawGlyph only draws 1 glyph!")
        return
    end

    glyph = string.upper(glyph)

    local line = -2
    local column = -1

    if font[glyph] == nil then
        print("Error! glyph " .. glyph .. " doesn't exist")
        return
    end

    for _, code in pairs(font[glyph]) do
        if code == 1 then
            love.graphics.setColor(color[1] / 255, color[2] / 255, color[3] / 255)
            love.graphics.points(x + column, y + line)
            love.graphics.setColor(1, 1, 1)
        end

        column = column + 1

        if code == "N" then
            column = -1
            line = line + 1
        elseif code == "E" then
            return
        end
    end

    print("Warning: glyph " .. glyph .. " doesn't have an end flag!")
end

function _G.drawText(text, x, y, color)
    local c = color or {255, 255, 255}
    local w = 3

    local l = string.len(text)

    local lenght = (l * w) + (l - 1)

    local glyph_x = x - math.floor(lenght / 2) + 1

    for glyph in text:gmatch(".") do
        drawGlyph(glyph, glyph_x, y, c)

        glyph_x = glyph_x + w + 1
    end
end